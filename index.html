<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0066cc">
    <meta name="description" content="Your personal code snippet library for C++, Java, Python, HTML, CSS, and JavaScript">
    <title>Code Snippet Library</title>
    <link rel="manifest" href="manifest_v3.json">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="header-title">Code Library</div>
            <div class="header-actions">
                <button class="icon-btn" id="organizeBtn">
                    <i class="bi bi-arrows-move"></i>
                </button>
                <button class="icon-btn" id="settingsBtn">
                    <i class="bi bi-gear"></i>
                </button>
                <button class="icon-btn" id="galleryBtn">
                    <i class="bi bi-images"></i>
                    <span class="badge" id="galleryBadge" style="display: none;">0</span>
                </button>
                <button class="icon-btn" id="themeToggle">
                    <i class="bi bi-moon-stars"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Search -->
    <div class="search-container">
        <input type="text" class="search-input" id="searchInput" placeholder="Search snippets...">
    </div>

<!-- Filters -->
<div class="filter-container">
    <!-- Folder Chips (will be populated dynamically) -->
    <div id="folderChips" style="display: contents;"></div>
    
    <!-- Auto Folder Chips (tag-based) -->
    <div id="autoFolderChips" style="display: contents;"></div>
    
    <button class="filter-pill active" data-filter="all">All</button>
    <button class="filter-pill" data-filter="favorites"><i class="bi bi-bookmark"></i> Favorites</button>
    <button class="filter-pill" data-filter="beginner">Beginner</button>
    <button class="filter-pill" data-filter="intermediate">Intermediate</button>
    <button class="filter-pill" data-filter="advanced">Advanced</button>
</div>

    <!-- Language Tabs -->
    <div class="language-tabs-container">
        <div class="language-tabs" id="languageTabs"></div>
    </div>
    <!-- Folder Navigation -->
<div class="folder-nav-container" id="folderNavContainer" style="display: none;">
    <div class="folder-nav">
        <button class="folder-nav-btn" id="backToAllSnippets">
            <i class="bi bi-arrow-left"></i>
            <span>All Snippets</span>
        </button>
        <div class="folder-nav-current">
            <i class="bi bi-folder-fill"></i>
            <span id="currentFolderName">Folder Name</span>
        </div>
    </div>
</div>

    <!-- Snippet List -->
    <div class="snippet-list-container" id="snippetList"></div>

    <!-- Detail View -->
    <div class="detail-view" id="detailView">
        <div class="detail-header">
            <button class="icon-btn" id="backBtn">‚Üê</button>
            <div class="detail-title" id="detailTitle"></div>
        </div>
        <div class="detail-content" id="detailContent"></div>
        <div class="action-btn-group">
            <button class="action-btn primary" id="copyBtnDetail"><i class="bi bi-clipboard"></i> Copy</button>
            <button class="action-btn" id="youtubeSearchBtn"><i class="bi bi-youtube"></i> YouTube</button>
            <button class="action-btn" id="screenshotBtn"><i class="bi bi-camera"></i> Screenshot</button>
            <button class="action-btn" id="editBtnDetail"><i class="bi bi-pencil"></i> Edit</button>
            <button class="action-btn danger" id="deleteBtnDetail"><i class="bi bi-trash"></i> Delete</button>
        </div>
    </div>

    <!-- Gallery View -->
    <div class="gallery-view" id="galleryView">
        <div class="detail-header">
            <button class="icon-btn" id="closeGalleryBtn">‚Üê</button>
            <div class="detail-title">Screenshot Gallery</div>
        </div>
        <div class="storage-indicator">
            <div class="storage-text">Storage: <span id="storageUsed">0</span> / <span id="storageLimit">10</span> screenshots</div>
            <div class="storage-bar">
                <div class="storage-bar-fill" id="storageBarFill"></div>
            </div>
        </div>
        <div id="galleryContent"></div>
    </div>

    <!-- Gallery Preview -->
    <div class="gallery-preview" id="galleryPreview">
        <div class="gallery-preview-header">
            <button class="icon-btn" id="closePreviewBtn" style="color: white;">‚úï</button>
            <div class="gallery-preview-title" id="previewTitle"></div>
        </div>
        <img id="previewImage" class="gallery-preview-image" alt="Screenshot preview">
<div class="gallery-preview-actions">
            <button class="gallery-action-btn" id="redownloadBtn"><i class="fas fa-download"></i> Download</button>
            <button class="gallery-action-btn" id="shareBtn"><i class="fas fa-share-alt"></i> Share</button>
            <button class="gallery-action-btn danger" id="deleteGalleryBtn"><i class="far fa-trash-alt"></i> Delete</button>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <h2 class="modal-header">Settings & Data</h2>
            
            <div class="form-group">
                <label class="form-label"><i class="fas fa-info-circle"></i> About App</label>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
                    Learn more about Code Snippet Library
                </p>
                <button class="btn btn-primary" id="aboutBtn" style="width: 100%;">
                    <i class="fas fa-mobile-alt"></i> About This App
                </button>
            </div>

            <div class="form-group">
                <label class="form-label"><i class="fas fa-file-export"></i> Export Data</label>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
                    Download all your snippets as a backup file
                </p>
                <button class="btn btn-primary" id="exportBtn" style="width: 100%;">
                    <i class="fas fa-download"></i> Export All Snippets
                </button>
            </div>

            <div class="form-group">
                <label class="form-label"><i class="fas fa-file-import"></i> Import Data</label>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
                    Restore snippets from a backup file
                </p>
                <input type="file" id="importFile" accept=".json" style="display: none;">
                <button class="btn btn-primary" id="importBtn" style="width: 100%;">
                    <i class="fas fa-upload"></i> Import Snippets
                </button>
            </div>

            <div class="form-group">
                <label class="form-label"><i class="fas fa-trash-alt"></i> Clear Data</label>
                <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 10px;">
                    Delete all snippets and screenshots (cannot be undone)
                </p>
                <button class="btn btn-secondary" id="clearAllBtn" style="width: 100%; background: #EF4444; color: white;">
                    <i class="fas fa-exclamation-triangle"></i> Clear All Data
                </button>
            </div>

            <div class="modal-actions">
                <button class="btn btn-secondary" id="closeSettingsBtn" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <!-- Organize Modal -->
    <div class="modal" id="organizeModal">
        <div class="modal-content">
            <h2 class="modal-header">üìä Organize Snippets</h2>
            
            <div class="form-group">
    <label class="form-label">üìÅ Folders</label>
<div style="display: flex; gap: 8px; margin-bottom: 10px;">
    <button class="btn btn-primary" id="createFolderBtn" style="flex: 1;">
        <i class="bi bi-folder-plus"></i> New Folder
    </button>
    <button class="btn btn-secondary" id="toggleCustomFoldersBtn" style="flex: 1;">
        <i class="bi bi-eye-slash"></i> Hide Folders
    </button>
</div>
    <div id="folderList" style="max-height: 200px; overflow-y: auto;"></div>
    
    <!-- Add this section -->
    <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--border-light);">
<button class="btn btn-secondary" id="toggleAutoFoldersBtn" style="width: 100%;">
    <i class="bi bi-eye-slash"></i> Hide Tag Folders
</button>
        <p style="font-size: 0.75rem; color: var(--text-tertiary); margin-top: 8px;">
            Auto folders are created from your snippet tags
        </p>
    </div>
</div>

<hr style="border: none; border-top: 1px solid var(--border-light); margin: 20px 0;">
            
            <div class="form-group">
                <label class="form-label">üóÇÔ∏è Sort By</label>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="btn btn-primary" id="sortManualBtn" style="width: 100%;">
                        <i class="bi bi-hand-index"></i> Manual Order (Drag & Drop)
                    </button>
                    <button class="btn btn-primary" id="sortAlphabeticalBtn" style="width: 100%;">
                        <i class="bi bi-sort-alpha-down"></i> Alphabetical (A-Z)
                    </button>
                    <button class="btn btn-primary" id="sortByTagsBtn" style="width: 100%;">
                        <i class="bi bi-tags"></i> By Tags
                    </button>
                </div>
            </div>

            <div class="form-group" style="margin-top: 20px;">
                <div style="padding: 12px; background: var(--border-light); border-radius: var(--radius-md); font-size: 0.85rem; color: var(--text-secondary);">
                    <strong>Current:</strong> <span id="currentSortMode">Manual Order</span>
                </div>
            </div>

            <div class="modal-actions">
                <button class="btn btn-secondary" id="closeOrganizeBtn" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-content" style="max-width: 600px;">
            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                <button class="icon-btn" id="backToSettingsBtn" style="margin-right: 8px;">‚Üê</button>
                <h2 class="modal-header" style="margin: 0;">About Code Library</h2>
            </div>
            
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 4rem; margin-bottom: 10px;">üíª</div>
                <div style="font-size: 1.5rem; font-weight: 700; color: var(--primary-blue); margin-bottom: 5px;">
                    Code Snippet Library
                </div>
                <div style="font-size: 0.9rem; color: var(--text-secondary);">
                    Version 2.5
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">What is it?</label>
                <p style="font-size: 0.9rem; color: var(--text-secondary); line-height: 1.6;">
                    A powerful code snippet manager designed for students and developers. 
                    Store, organize, and learn from your personal collection of code patterns across multiple programming languages.
                </p>
            </div>

            <div class="form-group">
                <label class="form-label">‚ú® Key Features</label>
                <ul style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.8; margin-left: 20px;">
    <li>üìù Create & organize snippets for C++, Java, Python, HTML, CSS, JS</li>
    <li>üîç Search & filter by difficulty, favorites, tags</li>
    <li>üìÅ Custom folders for better organization</li>
    <li>üè∑Ô∏è Auto-generated tag folders (smart filtering)</li>
    <li>‚≠ê Mark favorites for quick access</li>
    <li>üè∑Ô∏è Add custom tags and difficulty levels</li>
    <li>üé® Syntax highlighting for better readability</li>
    <li>üîÑ Drag & drop to reorder snippets manually</li>
    <li>üìä Multiple sort options (Manual, A-Z, By Tags)</li>
    <li>üì∏ Beautiful code screenshots with 6 themes</li>
    <li>üñºÔ∏è In-app screenshot gallery</li>
    <li>üíæ Export/Import for backup & sharing</li>
    <li>üåô Dark & Light themes</li>
    <li>üì± Installable PWA (works offline)</li>
    <li>üé• YouTube search integration</li>
</ul>
            </div>

<div class="form-group">
    <label class="form-label">How does it work?</label>
    <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px;">
        <strong>1. Create Snippets:</strong> Add code with explanations, tags, and difficulty levels
    </p>
    <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px;">
        <strong>2. Organize with Folders:</strong> Create custom folders or use auto-generated tag folders to group related snippets
    </p>
    <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px;">
        <strong>3. Arrange & Sort:</strong> Use drag & drop, alphabetical sorting, or tag-based sorting to organize your way
    </p>
    <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px;">
        <strong>4. Study:</strong> Review snippets, search YouTube tutorials, take screenshots
    </p>
    <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6; margin-bottom: 10px;">
        <strong>5. Backup:</strong> Export your collection anytime for safekeeping
    </p>
    <p style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.6;">
        All data is stored locally on your device using localStorage, ensuring privacy and offline access.
    </p>
</div>

            <div class="form-group">
                <label class="form-label">üí° Pro Tips</label>
                <ul style="font-size: 0.85rem; color: var(--text-secondary); line-height: 1.8; margin-left: 20px;">
                    <li>Use tags like "Exam", "Important", "Review" for quick filtering</li>
                    <li>Take screenshots to share snippets with classmates</li>
                    <li>Export regularly to backup your collection</li>
                    <li>Use YouTube search to find tutorials for complex topics</li>
                    <li>Mark snippets as Beginner/Intermediate/Advanced to track progress</li>
                    <li>Use tag folders for automatic organization - they update as you add tags!</li>
<li>Drag & drop snippets in Manual sort mode to create your perfect order</li>
<li>Organize snippets into folders by topic (Arrays, Sorting, DOM, etc.)</li>
                </ul>
            </div>

            <div class="modal-actions">
                <button class="btn btn-secondary" id="closeAboutBtn" style="width: 100%;">Close</button>
            </div>
        </div>
    </div>

    <!-- FAB -->
    <button class="fab" id="addFab">+</button>

    <!-- Modal -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <h2 class="modal-header" id="modalTitle">Add Snippet</h2>
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" class="form-input" id="titleInput" placeholder="e.g., Binary Search">
            </div>
            <div class="form-group">
                <label class="form-label">Category</label>
                <select class="form-select" id="categoryInput">
                    <option value="Data Structures">Data Structures</option>
                    <option value="Algorithms">Algorithms</option>
                    <option value="Patterns">Design Patterns</option>
                    <option value="Syntax">Syntax & Basics</option>
                    <option value="Utilities">Utilities</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Code</label>
                <textarea class="form-textarea" id="codeInput" placeholder="Paste your code here..."></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Explanation</label>
                <textarea class="form-textarea" id="explanationInput" placeholder="Explain what this code does..." style="min-height: 80px;"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Difficulty (Optional)</label>
                <select class="form-select" id="difficultyInput">
                    <option value="">None</option>
                    <option value="Beginner">Beginner</option>
                    <option value="Intermediate">Intermediate</option>
                    <option value="Advanced">Advanced</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Tags (Optional, comma-separated)</label>
                <input type="text" class="form-input" id="tagsInput" placeholder="e.g., Array, Loop, Important">
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelBtn">Cancel</button>
                <button class="btn btn-primary" id="saveBtn">Save</button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- Screenshot Modal -->
    <div class="modal" id="screenshotModal">
        <div class="modal-content">
            <h2 class="modal-header">Choose Screenshot Theme</h2>
            <div class="theme-selector">
                <div class="theme-option dracula active" data-theme="dracula">
                    <div class="theme-name">Dracula</div>
                </div>
                <div class="theme-option monokai" data-theme="monokai">
                    <div class="theme-name">Monokai</div>
                </div>
                <div class="theme-option nord" data-theme="nord">
                    <div class="theme-name">Nord</div>
                </div>
                <div class="theme-option github-light" data-theme="github-light">
                    <div class="theme-name">Light</div>
                </div>
                <div class="theme-option synthwave" data-theme="synthwave">
                    <div class="theme-name">Synthwave</div>
                </div>
                <div class="theme-option ocean" data-theme="ocean">
                    <div class="theme-name">Ocean</div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelScreenshot">Cancel</button>
                <button class="btn btn-primary" id="generateScreenshot">Generate</button>
            </div>
        </div>
    </div>

    <canvas id="screenshotCanvas"></canvas>
    
    <!-- Folder Selector Modal -->
<div class="modal" id="folderSelectorModal">
    <div class="modal-content">
        <h2 class="modal-header">üìÅ Add to Folder</h2>
        <p style="font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 16px;">
            Select folders to add this snippet to
        </p>
        <div id="folderSelectorList" style="max-height: 300px; overflow-y: auto;"></div>
        <div class="modal-actions" style="margin-top: 20px;">
            <button class="btn btn-secondary" id="closeFolderSelectorBtn" style="width: 100%;">Done</button>
        </div>
    </div>
</div>

   <script src="script.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</body>
</html>
